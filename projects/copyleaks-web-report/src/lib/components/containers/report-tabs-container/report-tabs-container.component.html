<ng-container *ngIf="loadingProgressPct === 100; else realTimeView">
	<ng-container *ngIf="!showLoadingView; else loadingViewRef">
		<div
			*ngIf="!hidePlagarismTap || showDisabledProducts"
			class="tab-plagiarism"
			[crReportScoreTooltip]="
				hidePlagarismTap && showDisabledProducts
					? null
					: {
							identicalPct: identicalTotal / wordsTotal,
							minorChangesPct: minorChangesTotal / wordsTotal,
							paraphrasedPct: paraphrasedTotal / wordsTotal,
							omittedPct: excludedTotal / wordsTotal
					  }
			"
			[crReportScoreTooltipPosition]="EReportScoreTooltipPosition.BELOW"
			[style.flex-grow]="1"
			[class.tab-selected]="selectedTap === EReportViewType.PlagiarismView && !hidePlagarismTap"
			[class.tab-disabled]="hidePlagarismTap && showDisabledProducts"
			[matTooltip]="hidePlagarismTap && showDisabledProducts ? DISABLED : ''"
			matTooltipClass="web-report-mat-tooltip"
			(click)="selectTap(EReportViewType.PlagiarismView)">
			<div class="bar-title-container">
				<span class="bar-title" web-report-title-font i18n>Plagiarism</span>
				<span class="bar-score" web-report-title-font>
					{{ hidePlagarismTap && showDisabledProducts ? 'N/A' : (plagarismScore | percent : '1.0-1') }}
				</span>
			</div>
			<div class="grade-bar">
				<div class="bar plagiarism" [style.width.%]="100">
					<div
						class="identical"
						[class.first-percentage]="!!identicalTotal"
						[class.last-percentage]="!minorChangesTotal && !paraphrasedTotal"
						[style.width.%]="(identicalTotal / wordsTotal) * 100"
						[style.border]="!identicalTotal ? 'none' : ''"></div>
					<div
						class="minor-changes"
						[class.first-percentage]="!identicalTotal"
						[class.last-percentage]="!paraphrasedTotal"
						[style.width.%]="(minorChangesTotal / wordsTotal) * 100"
						[style.border]="!minorChangesTotal ? 'none' : ''"></div>
					<div
						class="paraphrased last-percentage"
						[class.first-percentage]="!identicalTotal && !minorChangesTotal"
						[style.width.%]="(paraphrasedTotal / wordsTotal) * 100"
						[style.border]="!paraphrasedTotal ? 'none' : ''"></div>
				</div>
			</div>
		</div>
		<div
			*ngIf="!hideAiTap || showDisabledProducts"
			class="tab-ai"
			[crReportScoreTooltip]="
				hideAiTap && showDisabledProducts
					? null
					: {
							aiPct: aiScore,
							humanPct: 1 - aiScore
					  }
			"
			[crReportScoreTooltipPosition]="EReportScoreTooltipPosition.BELOW"
			[style.flex-grow]="1"
			[class.tab-selected]="selectedTap === EReportViewType.AIView && !hideAiTap"
			[class.tab-disabled]="hideAiTap && showDisabledProducts"
			[matTooltip]="hideAiTap && showDisabledProducts ? DISABLED : ''"
			matTooltipClass="web-report-mat-tooltip"
			(click)="selectTap(EReportViewType.AIView)">
			<div class="bar-title-container">
				<span class="bar-title" web-report-title-font i18n>AI Content</span>
				<span class="bar-score" web-report-title-font>
					{{ hideAiTap && showDisabledProducts ? 'N/A' : (aiScore | percent : '1.0-1') }}
				</span>
			</div>
			<div class="grade-bar">
				<div class="bar ai-content" [style.width.%]="aiScore * 100" [style.border]="!aiScore ? 'none' : ''"></div>
			</div>
		</div>

		<ng-container *ngFor="let ref of customTabsTemplateRef">
			<ng-container *ngTemplateOutlet="ref"></ng-container>
		</ng-container>
	</ng-container>

	<ng-template #loadingViewRef>
		<div class="loading-tab first">
			<div class="bar-title-container">
				<ngx-skeleton-loader class="skeleton" [appearance]="'line'" style="width: 40%"></ngx-skeleton-loader>
				<ngx-skeleton-loader class="skeleton" [appearance]="'line'" style="width: 20%"></ngx-skeleton-loader>
			</div>
			<ngx-skeleton-loader class="bar skeleton" [appearance]="'line'" style="width: 100%"></ngx-skeleton-loader>
		</div>

		<div class="loading-tab">
			<div class="bar-title-container">
				<ngx-skeleton-loader class="skeleton" [appearance]="'line'" style="width: 40%"></ngx-skeleton-loader>
				<ngx-skeleton-loader class="skeleton" [appearance]="'line'" style="width: 20%"></ngx-skeleton-loader>
			</div>
			<ngx-skeleton-loader class="bar skeleton" [appearance]="'line'" style="width: 100%"></ngx-skeleton-loader>
		</div>
	</ng-template>
</ng-container>

<ng-template #realTimeView>
	<div
		class="tab-plagiarism"
		[style.flex-grow]="1"
		[class.tab-selected]="selectedTap === EReportViewType.PlagiarismView && !hidePlagarismTap"
		[class.tab-disabled]="hidePlagarismTap && showDisabledProducts"
		matTooltipClass="web-report-mat-tooltip"
		(click)="selectTap(EReportViewType.PlagiarismView)">
		<div class="bar-title-container">
			<span class="bar-title" web-report-title-font i18n>Plagiarism</span>
			<span class="bar-score real-time-view" web-report-title-font>
				<ng-container i18n>Loading...</ng-container>
				&nbsp;
				{{ loadingProgressPct + '%' }}
			</span>
		</div>
		<div class="grade-bar">
			<div class="bar plagiarism" [style.width.%]="100">
				<div class="identical real-time-view" [class.first-percentage]="true" [style.width.%]="50"></div>
				<div class="minor-changes real-time-view" [style.width.%]="25"></div>
				<div class="paraphrased last-percentage real-time-view" [style.width.%]="15"></div>
			</div>
		</div>
	</div>
	<div
		class="tab-ai"
		[style.flex-grow]="1"
		[class.tab-selected]="selectedTap === EReportViewType.AIView && !hideAiTap"
		[class.tab-disabled]="hideAiTap && showDisabledProducts"
		matTooltipClass="web-report-mat-tooltip"
		(click)="selectTap(EReportViewType.AIView)">
		<div class="bar-title-container">
			<span class="bar-title" web-report-title-font i18n>AI Content</span>
			<span class="bar-score real-time-view" web-report-title-font>
				<ng-container i18n>Loading...</ng-container>
				&nbsp;
				{{ loadingProgressPct + '%' }}
			</span>
		</div>
		<div class="grade-bar">
			<div class="bar ai-content real-time-view" [style.width.%]="50"></div>
		</div>
	</div>
</ng-template>
