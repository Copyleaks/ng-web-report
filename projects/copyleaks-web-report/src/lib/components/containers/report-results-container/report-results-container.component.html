<cr-results-actions
	*ngIf="!showLoadingView && !showCustomView"
	[resultsActions]="resultsActions"
	[searchedValue]="searchedValue"
	[showLoadingView]="false"
	[isMobile]="isMobile"
	[expandSection]="showAlertsSection"
	(onExpandToggle)="showAlertsSection = $event"
	(onSearch)="onSearch($event)"></cr-results-actions>

<div
	class="report-results-item-top-container"
	[style]="'width:100%'"
	[ngStyle]="{
		display: showLoadingView || !showAlertsSection || showCustomView ? 'none' : 'flex'
	}"
	fxLayout="column"
	fxLayoutAlign="start center"
	fxLayoutGap="8px">
	<div #resultsContainer class="results-item-top-container">
		<div
			fxLayoutGap="8px"
			[ngClass]="{
				'results-item-container': !isMobile,
				'results-item-mobile-container': isMobile,
				'empty-results-container': !displayedResults || displayedResults.length === 0
			}">
			<ng-container *ngIf="displayedResults && displayedResults.length > 0; else emptyState">
				<ng-container *ngIf="!isMobile; else mobileContainerView">
					<cdk-virtual-scroll-viewport
						class="desktop-scroll"
						itemSize="195"
						[ngClass]="{ 'scroll-with-padding': addPaddingToContainer }">
						<div
							style="width: 100%"
							fxLayout="column"
							fxLayoutAlign="start start"
							fxLayoutGap="4px"
							*cdkVirtualFor="let item of displayedResults">
							<cr-report-results-item
								#resultitem
								[resultItem]="item"
								[isMobile]="isMobile"
								style="width: 100%"></cr-report-results-item>
						</div>
					</cdk-virtual-scroll-viewport>
				</ng-container>
				<ng-template #mobileContainerView>
					<cdk-virtual-scroll-viewport
						class="mobile-scroll"
						orientation="horizontal"
						itemSize="313"
						(scrolledIndexChange)="onScroll($event)">
						<div
							style="width: 100%"
							fxLayout="column"
							fxLayoutAlign="start start"
							fxLayoutGap="4px"
							*cdkVirtualFor="let item of displayedResults">
							<cr-report-results-item
								#resultitem
								[resultItem]="item"
								[isMobile]="isMobile"
								style="width: 100%"></cr-report-results-item>
						</div>
					</cdk-virtual-scroll-viewport>
				</ng-template>

				<ng-container *ngIf="lastItemLoading">
					<cr-report-results-item [showLoader]="true" [style]="'width:100%'"></cr-report-results-item>
				</ng-container>
			</ng-container>
		</div>
		<ng-template #emptyState>
			<cr-empty-result-state *ngIf="!showLoadingView"></cr-empty-result-state>
		</ng-template>
	</div>
	<div
		class="navigate-mobie-button-contaienr"
		*ngIf="isMobile && allResultsItemLength > 1"
		fxLayout="row"
		fxLayoutAlign="start center"
		fxLayoutGap="8px">
		<mat-chip
			*ngIf="allResultsItemLength > 5 && currentViewedIndex > 2"
			(click)="scrollToIndex(0)"
			class="mat-chip-navigate">
			{{ currentViewedIndex < allResultsItemLength - 3 ? currentViewedIndex - 2 : allResultsItemLength - 5 }}
		</mat-chip>
		<button
			class="navigate-mobie-button"
			[ngClass]="{
				'navigate-mobie-button-select ': navigateMobileButton == enumNavigateMobileButton.FirstButton
			}"
			(click)="onDotNavigate(enumNavigateMobileButton.FirstButton)"></button>
		<button
			*ngIf="allResultsItemLength > 1"
			class="navigate-mobie-button"
			[ngClass]="{
				'navigate-mobie-button-select ': navigateMobileButton == enumNavigateMobileButton.SecondButton
			}"
			(click)="onDotNavigate(enumNavigateMobileButton.SecondButton)"></button>
		<button
			*ngIf="allResultsItemLength > 2"
			class="navigate-mobie-button"
			[ngClass]="{
				'navigate-mobie-button-select ': navigateMobileButton == enumNavigateMobileButton.ThirdButton
			}"
			(click)="onDotNavigate(enumNavigateMobileButton.ThirdButton)"></button>
		<button
			*ngIf="allResultsItemLength > 3"
			class="navigate-mobie-button"
			[ngClass]="{
				'navigate-mobie-button-select ': navigateMobileButton == enumNavigateMobileButton.FourthButton
			}"
			(click)="onDotNavigate(enumNavigateMobileButton.FourthButton)"></button>
		<button
			*ngIf="allResultsItemLength > 4"
			class="navigate-mobie-button"
			[ngClass]="{
				'navigate-mobie-button-select ': navigateMobileButton == enumNavigateMobileButton.FifthButton
			}"
			(click)="onDotNavigate(enumNavigateMobileButton.FifthButton)"></button>

		<mat-chip
			*ngIf="allResultsItemLength > 5 && currentViewedIndex < allResultsItemLength - 3"
			(click)="scrollToIndex(allResultsItemLength - 1)"
			class="mat-chip-navigate">
			{{ currentViewedIndex > 2 ? allResultsItemLength - currentViewedIndex - 3 : allResultsItemLength - 5 }}
		</mat-chip>
	</div>
</div>
<ng-container *ngIf="showLoadingView">
	<cr-results-actions [showLoadingView]="showLoadingView"></cr-results-actions>
	<div
		class="report-results-item-top-container"
		[style]="'width:100%'"
		fxLayout="column"
		fxLayoutAlign="start center"
		fxLayoutGap="8px">
		<div #resultsContainer class="results-item-top-container">
			<div
				fxLayoutGap="8px"
				[ngClass]="{
					'results-item-container': !isMobile,
					'results-item-mobile-container': isMobile
				}">
				<ng-container *ngFor="let _ of [1, 2, 3, 4, 5, 6, 7, 8]">
					<cr-report-results-item [showLoader]="true" [style]="'width:100%'"></cr-report-results-item>
				</ng-container>
			</div>
			<ng-template #emptyState>
				<cr-empty-result-state></cr-empty-result-state>
			</ng-template>
		</div>
	</div>
</ng-container>

<div
	class="custom-results-container"
	#customResultView
	[ngStyle]="{
		display: !showCustomView || showLoadingView ? 'none' : 'flex'
	}">
	<ng-container *ngTemplateOutlet="customResultsTemplate ?? null"></ng-container>
</div>
